let t;function e(){for(layout in L.GeoJSON.include({setFilter:function(t,e){return this.options.filter=e,this.clearLayers(),this.addData(t),this}}),t=L.map("map",{center:[51.65892,6.41601],zoom:5,scrollWheelZoom:!1,zoomControl:!1}),L.control.zoom({position:"topright"}).addTo(t),t.layout={items:{light:{layer:L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attribution">CARTO</a>, <a href="http://prtr.ec.europa.eu">E-PRTR</a>'}),button:document.getElementById("map-layout-light")},green:{layer:L.tileLayer("https://tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey=9a85f60a13be4bf7bed59b5ffc0f4d86",{attribution:'Maps &copy; <a href="https://www.thunderforest.com">Thunderforest</a>, Data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>, <a href="http://prtr.ec.europa.eu">E-PRTR</a>'}).addTo(t),button:document.getElementById("map-layout-green")}},toggle:function(){for(layout in t.layout.items){let e=t.layout.items[layout];e.button.classList.toggle("is-info"),e.button.classList.contains("is-info")?t.addLayer(e.layer):t.removeLayer(e.layer)}}},t.layout.items)t.layout.items[layout].button.addEventListener("click",t.layout.toggle);t.sidebar=L.control.sidebar("sidebar",{position:"left"}).addTo(t),t.on("focus",()=>{t.scrollWheelZoom.enable()}),t.on("blur",()=>{t.scrollWheelZoom.disable()})}function o(e){L.geoJson(e,{pointToLayer:function(t,e){return L.circleMarker(e,{radius:30,color:t.properties.color,fillColor:t.properties.color,weight:1,opacity:.7,fillOpacity:.4}).bindPopup(r(t))}}).addTo(t)}function r(t){return`<h2>${t.properties.FacilityName}</h2>\n        ${t.properties.CountryName}`}function a(t){return new Promise(e=>{var o=document.createElement("script");o.onload=function(){csv2geojson.csv2geojson(t,{latfield:"latitude",lonfield:"longitude",delimiter:";"},(t,o)=>{t?console.error(t):e(o)})},o.src="vendor/csv2geojson.js",document.head.appendChild(o)})}document.addEventListener("DOMContentLoaded",t=>{e(),fetch("data.csv").then(t=>t.text(),t=>{console.error(t)}).then(a).then(o)});